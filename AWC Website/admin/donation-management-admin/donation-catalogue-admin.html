<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ahsana Welfare Center</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500,600,700,800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <link rel="stylesheet" href="css/animate.css">
  
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/magnific-popup.css">


  <link rel="stylesheet" href="css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="css/jquery.timepicker.css">

  <link rel="stylesheet" href="css/flaticon.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <div class="wrap">
   <div class="container">
    <div class="row">
     <div class="col-md-6 d-flex align-items-center">
      <p class="mb-0 phone pl-md-2">
       <a href="#" class="mr-2"><span class="fa fa-phone mr-1"></span>03-77734199</a> 
       <a href="#"><span class="fa fa-paper-plane mr-1"></span>info@ahsana.org</a>
     </p>
   </div>
   <div class="col-md-6 d-flex justify-content-md-end">
    <div class="social-media">
     <p class="mb-0 d-flex">
      <a href="https://www.facebook.com/ahsana.org/" class="d-flex align-items-center justify-content-center"><span class="fa fa-facebook"><i class="sr-only">Facebook</i></span></a>
      <a href="https://www.instagram.com/ahsanakl_/" class="d-flex align-items-center justify-content-center"><span class="fa fa-instagram"><i class="sr-only">Instagram</i></span></a>
    </p>
  </div>
</div>
</div>
</div>
</div>
<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
 <div class="container">
   <a class="navbar-brand" href="../homepage-admin/homepage-admin.html">Ahsana Welfare Center</a>
   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
     <span class="oi oi-menu"></span> Menu
   </button>

   <div class="collapse navbar-collapse" id="ftco-nav">
     <ul class="navbar-nav ml-auto">
      <li class="nav-item active"><a href="homepage-admin.html" class="nav-link">Home</a></li>
      <li class="nav-item"><a href="../account-admin/profile-admin.html" class="nav-link">Account</a></li>
      <li class="nav-item"><a href="../ahsana-residents-update/ahsana-residents-admin.html" class="nav-link">Residents</a></li>
      <li class="nav-item"><a href="../donation-management-admin/donation-catalogue-admin.html" class="nav-link">Donate</a></li>
      <li class="nav-item"><a href="../newsletter-admin/newsletter-main-admin.html" class="nav-link">Newsletter</a></li>
      <li class="nav-item"><a href="../contact-and-feedback/contact-admin.html" class="nav-link">Contact</a></li>
      <li class="nav-item"><a href="../contact-and-feedback/feedback-admin.html" class="nav-link">Feedback</a></li>
      <li class="nav-item cta"><a href="#" class="nav-link">Logout</a></li>
     </ul>
   </div>
 </div>
</nav>
<!-- END nav -->

<section class="hero-wrap hero-wrap-2" style="background-image: url('images/ahsana_bg2.jpg');" data-stellar-background-ratio="0.5">
  <div class="overlay"></div>
  <div class="container">
    <div class="row no-gutters slider-text align-items-end">
      <div class="col-md-9 ftco-animate pb-5">
       <p class="breadcrumbs mb-2"><span class="mr-2"><a href="../homepage-donor/homepage-donor.html">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>Donate <i class="ion-ios-arrow-forward"></i></span></p>
       <h1 class="mb-0 bread">Donate</h1>
     </div>
   </div>
 </div>
</section>

<section class="ftco-section">
 <div class="container">
  <div class="row align-items-center justify-content-between">
    <h2 class="mb-4">Donation Section</h2>
    <button type="button" class="btn btn-secondary add-donation" href="add-donation.html">ADD NEW</button>
    <div class="modal" id="addDonationModal" role="dialog" aria-labelledby="donationModal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
        </div>
      </div>
    </div>
  </div>
  <div class="row" id="donation-content">
  <div>
    Load---
  </div>
<!--<div class="col-md-6 col-lg-3">
    <div class="causes causes-2 text-center ftco-animate">
     <a href="#" class="img w-100" style="background-image: url(images/minyakmasak.jpg);"></a>
     <div class="text p-3">
      <h2><a href="#">Foodpack #1</a></h2>
      <p>Include 10L of cooking oil, 10kg of rice and 5kg of sugar.</p>
      <div class="goal mb-4">
        <p><span>RM120</span> to go</p>
        <div class="progress" style="height:20px">
          <div class="progress-bar progress-bar-striped" style="width:70%; height:20px">70%</div>
        </div>
      </div>
      <p><a href="#" class="btn btn-light w-100">Edit</a></p>
    </div>
  </div>
</div>
<div class="col-md-6 col-lg-3">
 <div class="causes causes-2 text-center ftco-animate">
  <a href="#" class="img w-100" style="background-image: url(images/mee.jpg);"></a>
  <div class="text p-3">
    <h2><a href="#">Foodpack #2</a></h2>
    <p>Include 5kg of mee, mihun and seasonings. &nbsp</p>
    <div class="goal mb-4">
      <p><span>RM90</span> to go</p>
      <div class="progress" style="height:20px">
        <div class="progress-bar progress-bar-striped" style="width:82%; height:20px">82%</div>
      </div>
    </div>
    <p><a href="#" class="btn btn-light w-100">Edit</a></p>
  </div>
</div>
</div>
<div class="col-md-6 col-lg-3">
 <div class="causes causes-2 text-center ftco-animate">
  <a href="#" class="img w-100" style="background-image: url(images/ensuregold.png);"></a>
  <div class="text p-3">
    <h2><a href="#">Foodpack #3</a></h2>
    <p>Include 10 tins of special medical milk.</p>
    <div class="goal mb-4">
      <p><span>RM110</span> to go</p>
      <div class="progress" style="height:20px">
        <div class="progress-bar progress-bar-striped" style="width:95%; height:20px">95%</div>
      </div>
    </div>
    <p><a href="#" class="btn btn-light w-100">Edit</a></p>
  </div>
</div>
</div>
<div class="col-md-6 col-lg-3">
 <div class="causes causes-2 text-center ftco-animate">
  <a href="#" class="img w-100" style="background-image: url(images/buah.jpg);"></a>
  <div class="text p-3">
    <h2><a href="#">Foodpack #4</a></h2>
    <p>Fruits and vegetables.</p>
    <br>
    <div class="goal mb-4">
      <p><span>RM250</span> to go</p>
      <div class="progress" style="height:20px">
        <div class="progress-bar progress-bar-striped" style="width:75%; height:20px">75%</div>
      </div>
    </div>
    <p><a href="#" class="btn btn-light w-100">Edit</a></p>
  </div>
</div>
</div>
<div class="col-md-6 col-lg-3">
 <div class="causes causes-2 text-center ftco-animate">
  <a href="#" class="img w-100" style="background-image: url(images/residents.jpg);"></a>
  <div class="text p-3">
    <h2><a href="#">Medical</a></h2>
    <p>For the medicine and hospital bills of the residents</p><br>
    <div class="goal mb-4">
      <p><span>RM560</span> to go</p>
      <div class="progress" style="height:20px">
        <div class="progress-bar progress-bar-striped" style="width:70%; height:20px">70%</div>
      </div>
    </div>
    <p><a href="#" class="btn btn-light w-100">Edit</a></p>
  </div>
</div>
</div>
<div class="col-md-6 col-lg-3">
 <div class="causes causes-2 text-center ftco-animate">
  <a href="#" class="img w-100" style="background-image: url(images/ahsana.jpg);"></a>
  <div class="text p-3">
    <h2><a href="#">Electricity</a></h2>
    <p>For the center's monthly electric's bills</p><br>
    <div class="goal mb-4">
      <p><span>RM135</span> to go</p>
      <div class="progress" style="height:20px">
        <div class="progress-bar progress-bar-striped" style="width:82%; height:20px">82%</div>
      </div>
    </div>
    <p><a href="#" class="btn btn-light w-100">Edit</a></p>
  </div>
</div>
</div>
<div class="col-md-6 col-lg-3">
 <div class="causes causes-2 text-center ftco-animate">
  <a href="#" class="img w-100" style="background-image: url(images/water.jpg);"></a>
  <div class="text p-3">
    <h2><a href="#">Water</a></h2>
    <p>For the center's monthly water's bills</p><br>
    <div class="goal mb-4">
      <p><span>RM50</span> to go</p>
      <div class="progress" style="height:20px">
        <div class="progress-bar progress-bar-striped" style="width:95%; height:20px">95%</div>
      </div>
    </div>
    <p><a href="#" class="btn btn-light w-100">Edit</a></p>
  </div>
</div>
</div>
<div class="col-md-6 col-lg-3">
 <div class="causes causes-2 text-center ftco-animate">
  <a href="#" class="img w-100" style="background-image: url(images/creative.jpg);"></a>
  <div class="text p-3">
    <h2><a href="#">Creativity</a></h2>
    <p>To unleash the artistic trait in each residents by doing art projects and fun activities</p>
    <div class="goal mb-4">
      <p><span>RM150</span> to go</p>
      <div class="progress" style="height:20px">
        <div class="progress-bar progress-bar-striped" style="width:0%; height:20px">0%</div>
      </div>
    </div>
    <p><a href="#" class="btn btn-light w-100">Edit</a></p>
   </div>
 </div>
</div>
</div>
<div class="row mt-5">
  <div class="col text-center">
    <div class="block-27">
      <ul>
        <li><a href="#">&lt;</a></li>
        <li class="active"><span>1</span></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">5</a></li>
        <li><a href="#">&gt;</a></li>
      </ul>
    </div>
  </div>-->
</div>
</div>
</section>

<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
        <h2 class="footer-heading">Ahsana Welfare Center</h2>
        <p>Empowering lives, creating hope: Together we can make a difference.</p>
        <ul class="ftco-footer-social p-0">
          <!-- <li class="ftco-animate"><a href="#" data-toggle="tooltip" data-placement="top" title="Twitter"><span class="fa fa-twitter"></span></a></li> -->
          <li class="ftco-animate"><a href="https://www.facebook.com/ahsana.org/" data-toggle="tooltip" data-placement="top" title="Facebook"><span class="fa fa-facebook"></span></a></li>
          <li class="ftco-animate"><a href="https://www.instagram.com/ahsanakl_/" data-toggle="tooltip" data-placement="top" title="Instagram"><span class="fa fa-instagram"></span></a></li>
        </ul>
        <p><a href="../donation-management-admin/donation-catalogue-admin.html" class="btn btn-quarternary">Donate Now</a></p>
      </div>
      
      <div class="col-md-6 col-lg-3 pl-lg-5 mb-4 mb-md-0">
        <h2 class="footer-heading">Quick Links</h2>
        <ul class="list-unstyled">
          <li><a href="homepage-admin.html" class="py-2 d-block">Home</a></li>
          <li><a href="../donation-management-admin/donation-catalogue-admin.html" class="py-2 d-block">Donate</a></li>
          <li><a href="../ahsana-residents-update/ahsana-residents-admin.html" class="py-2 d-block">Residents</a></li>
          <li><a href="../newsletter-admin/newsletter-main-admin.html" class="py-2 d-block">Newsletter</a></li>
          <li><a href="../contact-and-feedback/contact-admin.html" class="py-2 d-block">Contact</a></li>
          <li><a href="../contact-and-feedback/feedback-admin.html" class="py-2 d-block">Feedback</a></li>
        </ul>
      </div>
      <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
        <h2 class="footer-heading">Have a Question?</h2>
        <div class="block-23 mb-3">
          <ul>
            <li><span class="icon fa fa-map"></span><span class="text">2, Jalan 4/153a, Taman Puchong Indah, 58200 Wilayah Persekutuan, Wilayah Persekutuan Kuala Lumpur</span></li>
            <li><a href="#"><span class="icon fa fa-phone"></span><span class="text">03-77734199</span></a></li>
            <li><a href="#"><span class="icon fa fa-paper-plane"></span><span class="text">info@ahsana.org</span></a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row mt-5">
      <div class="col-md-12 text-center">

      <p class="copyright"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
        <!-- Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib.com</a> -->
        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
      </div>
  </div>
</div>
</footer>




<!-- loader -->
<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


<script src="js/jquery.min.js"></script>
<script src="js/jquery-migrate-3.0.1.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/jquery.animateNumber.min.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="js/jquery.timepicker.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/scrollax.min.js"></script>
<script src="js/main.js"></script>
<script>
  $('.add-donation').on('click', function(e){
      e.preventDefault();
      $('#addDonationModal').modal('show').find('.modal-content').load($(this).attr('href'));
    });
</script>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getDatabase, ref, child, onValue, remove, set } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";
  import { getStorage, ref as sRef, deleteObject} from "https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js";

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAnRXDaONlj8ebUzJh-8veX1GtgI9IF3Hs",
    authDomain: "ahsana-welfare-center-52143.firebaseapp.com",
    databaseURL: "https://ahsana-welfare-center-52143-default-rtdb.firebaseio.com",
    projectId: "ahsana-welfare-center-52143",
    storageBucket: "ahsana-welfare-center-52143.appspot.com",
    messagingSenderId: "52579977535",
    appId: "1:52579977535:web:d259c9b4952431c5daab8a"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const storage = getStorage(app);

  const starCountRef = ref(db, 'donations');
  onValue(starCountRef, (snapshot) => {
      const data = snapshot.val();
      var card = "";
      var donatArr = [];
      
      if(data == null){
          card += `<div>No Donation Yet</div>`;
          $('#donation-content').html(card);
          return;
      }

      for (const [key, value] of Object.entries(data)) {
          var donatD = data[key];
          var title = donatD.title;
          var desc = donatD.desc;
          var img = donatD.img;
          var imgName = donatD.imgName;
          var current = donatD.current;
          var percentage = donatD.percentage;
          var target = donatD.target;
          var status = donatD.status;

          donatArr.push({'id': key, 'title': title, 'desc': desc, 'img': img, 'imgName': imgName, 'current': current, 'percentage': percentage, 'target': target, 'status': status});
      }
      console.log('donatD');
      $(donatArr).each(function(){
          card += `<div class="col-md-6 col-lg-3">
                    <div class="causes causes-2 text-center ftco-animate">
                      <a href="#" class="img w-100" style="background-image: url('${this.img}');"></a>
                        <div class="text p-3">
                          <h2><a href="#">${this.title}</a></h2>
                          <p>${this.desc}</p>
                          <div class="goal mb-4">
                            <p><span>${this.current}</span> to go</p>
                          <div class="progress" style="height:20px">
                          <div class="progress-bar progress-bar-striped" style="width:'${this.percentage}'%; height:20px">${this.current}</div>
                        </div>
                        </div>
                            <div class="d-flex align-items-center">
                              <div><a href="../donation-management-admin/edit-donation.html?id=${this.id}" class="btn btn-secondary">EDIT</a></div>
                              <div class="btn btn-danger deletebtn ml-2" data-id="${this.id}">
                                  <input type="hidden" value="${this.imgName}"/>
                                  <i class="fa fa-trash-o" aria-hidden="true"></i>
                              </div>
                            </div>
                        </div>
                    </div>
                  </div>`;

      });
      console.log('donatD2');
      
      $('#donation-content').html(card);

      //setTimeout(() => { 
      //  $('.blogcard').addClass('fadeInUp ftco-animated');
      //}, 600);

      console.log('donatD3');

      /**$('.deletebtn').on('click', function(){
            var id = $(this).data('id');
            var imgName = $(this).children('input').val();

            if (confirm("Delete donation?") == true) {
                  const dbRef = ref(db, "/donations/" + id);
                  remove(dbRef).then(() => alert("Deleted Successfully"))

                  const desertRef = sRef(storage, `images/${imgName}`);
                  // Delete the file
                  deleteObject(desertRef).then(() => {
                    // File deleted successfully
                  }).catch((error) => {
                    // Uh-oh, an error occurred!
                    console.log(error);
                  });
            } else {
            }
      });**/
  });
</script>
</body>
</html>